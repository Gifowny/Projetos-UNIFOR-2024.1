// C++ code
//
#include <Servo.h>

int direita = 0;

int esquerda = 0;

Servo servo;

//MOTOR 1   
int motor1H = 7; //Controle de acionamento do motor

//MOTOR 2
int motor2H = 5; //Controle de acionamento do motor
int motor2L = 4; //Controle de acionamento do motor


long readUltrasonicDistance(int triggerPin, int echoPin)
{
  pinMode(triggerPin, OUTPUT);
  digitalWrite(triggerPin, LOW);
  delayMicroseconds(2);
  // Sets the trigger pin to HIGH state for 10 microseconds
  digitalWrite(triggerPin, HIGH);
  delayMicroseconds(10);
  digitalWrite(triggerPin, LOW);
  pinMode(echoPin, INPUT);
  // Reads the echo pin, and returns the sound wave travel time in microseconds
  return pulseIn(echoPin, HIGH);  
  
}

void setup()
{
  servo.attach(11, 500, 2500);
  //Manda o servo rodar de 0 graus(500) Ã  180 graus(2500)

  servo.write(90);
  Serial.begin(9600);
  pinMode(motor1H, OUTPUT);  
  pinMode(motor1L, OUTPUT);
  pinMode(motor2H, OUTPUT);
  pinMode(motor2L, OUTPUT);
}



//Motores para FRENTE 
  
  void frente()
  {
  digitalWrite(motor1H, HIGH);  
  digitalWrite(motor1L, LOW);
  digitalWrite(motor2H, HIGH);  
  digitalWrite(motor2L, LOW); 
  delay(3000);  
  }

  void di()
  {
  digitalWrite(motor1H, HIGH);  
  digitalWrite(motor1L, LOW);
  digitalWrite(motor2H, LOW);  
  digitalWrite(motor2L, HIGH); 
  delay(1000);  
  }
  void esq()
  {
  digitalWrite(motor1H, LOW);  
  digitalWrite(motor1L, HIGH);
  digitalWrite(motor2H, HIGH);  
  digitalWrite(motor2L, LOW); 
  delay(1000);  
  }
void pare()
  {
  analogWrite(motor1H, 0);  
  analogWrite(motor1L, 0);
  analogWrite(motor2H, 0);  
  analogWrite(motor2L, 0);  
 // delay(3000);  
  }

void loop()
{
  if (0.01723 * readUltrasonicDistance(A0, A1) < 50) {
    servo.write(0);
    delay(1300); // Wait for 3000 millisecond(s)
    if (servo.read() == 0) {
      esquerda = 0.01723 * readUltrasonicDistance(A0, A1);
    }
    servo.write(180);
    delay(1300); // Wait for 4000 millisecond(s)
    if (servo.read() == 180) {
      direita = 0.01723 * readUltrasonicDistance(A0, A1);
    }
     if (direita >= esquerda) {
      servo.write(90);
      di();
      delay(1000);
    } 
     else if (esquerda > direita) {
      servo.write(90);
      esq();
      delay(1000);
    }
  }
}
 